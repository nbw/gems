<GEMSWeb.Components.AudioModal.modal topic={@topic}/>
<GEMSWeb.Components.Presence.count users={@global[:users]} />
<section class="section" data-section="matrix">
  <% matrix = @global[:matrix] %>
  <% notes = get_notes(@local[:key], @local[:scale], matrix.w) %>
  <.live_component
    module={GEMSWeb.Components.Matrix}
    id="matrix"
    matrix={matrix}
    w={matrix.w}
    h={matrix.h}
    notes={notes}
    current={@local[:current]}
  />
</section>
<section class="section" data-section="cables">
  <GEMSWeb.Components.Cables.show />
</section>
<section class="section" data-section="controls">
  <div id="control" class="control-row justify-around">
    <div class="control flex-grow">
      <.live_component module={GEMSWeb.Components.Adsr} id="adsr" adsr={@local[:adsr]} />
    </div>
    <div class="control flex-shrink">
      <.live_component module={GEMSWeb.Components.LocalControl} id="local-control" local={@local} />
    </div>
    <%= if !public_room?(@topic) do %>
      <div class="control w-full border-t">
        <.live_component module={GEMSWeb.Components.GlobalControl} id="global-control" />
      </div>
    <% end %>
  </div>
</section>
<GEMSWeb.Components.Content.render  />
